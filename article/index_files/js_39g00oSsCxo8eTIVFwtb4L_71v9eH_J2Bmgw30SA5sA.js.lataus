/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function(Drupal){function getAnimationDuration(duration){var reducedMotionDuration=getComputedStyle(document.documentElement).getPropertyValue('--reduced-motion-duration');var reducedMotionMilliSeconds=parseInt(reducedMotionDuration,10);var finalDuration=window.matchMedia('(prefers-reduced-motion: reduce)')?reducedMotionMilliSeconds:duration;return finalDuration;}function closeSearch(){var button=document.getElementById('aalto-search-button');button.setAttribute('aria-expanded',false);document.querySelector('#search-container').classList.add('aalto-search__container--hidden');document.querySelector('body').classList.remove('search-open');document.querySelector('body').style.position='static';setTimeout(function(){button.focus();},getAnimationDuration(300));}function toggleSearch(){var button=document.getElementById('aalto-search-button');var expanded=Drupal.behaviors.aalto_utils.isExpanded(button);var searchContainer=document.getElementById('search-container');var searchBar=document.getElementById('aalto-search__input');if(expanded)closeSearch();else{button.setAttribute('aria-expanded',true);searchContainer.classList.remove('aalto-search__container--hidden');document.querySelector('body').classList.add('search-open');document.querySelector('body').style.position='fixed';searchBar.focus();}}function handleSearchKeyPress(e){if(Drupal.behaviors.aalto_utils.isEscPressed(e)===true){e.preventDefault();toggleSearch();}if(e.key==='Tab')Drupal.behaviors.aalto_utils.loopWithTab(e);}Drupal.behaviors.aalto_quikcsearch={attach:function attach(context){once('aalto_quikcsearch','html',context).forEach(function(){Drupal.behaviors.aalto_utils.addListenerIfExists('aalto-search-button','click',toggleSearch);Drupal.behaviors.aalto_utils.addListenerIfExists('aalto-search-close','click',toggleSearch);Drupal.behaviors.aalto_utils.addListenerIfExists('aalto-search-overlay','click',toggleSearch);Drupal.behaviors.aalto_utils.setupMenuKeys(document.getElementById('aalto-search'),handleSearchKeyPress);});}};})(Drupal);;
(function(Drupal,once){'use strict';function toggleLanguageDropdown(){if(!document.getElementById('CookiebotLanguageSelector'))return;if(document.getElementById('CookiebotLanguageSelector').getAttribute('aria-expanded')==='true')document.getElementById('CookiebotLanguageSelector').setAttribute('aria-expanded','false');else document.getElementById('CookiebotLanguageSelector').setAttribute('aria-expanded','true');}function loopWithinLanguageSelector(event){const button=document.getElementById('CookiebotLanguageSelector');if(!button)return;const expanded=Drupal.behaviors.aalto_utils.isExpanded(button);if(expanded===true)switch(event.key){case 'Escape':case 'Esc':event.preventDefault();toggleLanguageDropdown();button.focus();break;case 'Tab':Drupal.behaviors.aalto_utils.loopWithTab(event);break;}}function getLanguageSelectorOptions(enabledLanguages,currentLanguage){let liElements='';enabledLanguages.forEach((language)=>{let langTranslation;if(language==='fi')langTranslation='Suomeksi';if(language==='en')langTranslation='English';if(language==='sv')langTranslation='Svenska';liElements+='<li><a href="'+language+'" class="aalto-dropdown__link" lang="'+language+'"'+(currentLanguage===language?' aria-current="true"':'')+'>'+langTranslation+'</a></li>';});return liElements;}function addLanguageSelector(){const container=document.getElementById('CybotCookiebotDialogHeaderLogosWrapper');const languageSelectionContainer=document.createElement('div');const currentLanguage=window.drupalSettings.path.currentLanguage;const enabledLanguages=window.drupalSettings.site.enabledLanguages;if(container&&enabledLanguages.length>1){languageSelectionContainer.setAttribute('id','LanguageSelectionContainer');languageSelectionContainer.innerHTML='<div class="aalto-dropdown-container js-menu-container"><button type="button" aria-expanded="false" id="CookiebotLanguageSelector" class="js-menu-toggle aalto-dropdown__toggle aalto-dropdown__toggle--with_chevron"><span class="aalto-dropdown__toggle-custom-icon"></span><span class="aalto-dropdown__toggle-text">'+currentLanguage.toUpperCase()+'</span></button><ul class="aalto-list-unstyled aalto-dropdown__menu">'+getLanguageSelectorOptions(enabledLanguages,currentLanguage)+'</ul></div>';document.getElementById('CybotCookiebotDialogHeader').classList.add('has-content');container.appendChild(languageSelectionContainer);Drupal.behaviors.aalto_utils.addListenerIfExists('CookiebotLanguageSelector','click',toggleLanguageDropdown);Drupal.behaviors.aalto_utils.setupMenuKeys(document.getElementById('LanguageSelectionContainer'),loopWithinLanguageSelector);}}window.addEventListener('CookiebotOnDialogInit',addLanguageSelector,false);window.addEventListener('CookiebotOnDialogDisplay',addLanguageSelector,false);document.addEventListener('readystatechange',()=>{if(document.readyState==='complete'&&!document.getElementById('CookiebotLanguageSelector'))addLanguageSelector();});function unblockEmbed(){if(typeof Cookiebot!=='undefined'&&Cookiebot.consent&&!Cookiebot.consent.preferences){Cookiebot.submitCustomConsent(true,false,false);return;}window.dispatchEvent(new CustomEvent('cookieContentBlockerConsentGiven'));if(once('iframeInitRemove','.aalto_iframe').length)initRemoveElementsAt();}if(typeof Drupal.behaviors.cookieContentBlocker!=='undefined')Drupal.behaviors.cookieContentBlocker.attach(document,drupalSettings);var cookieConsentButton=[].slice.call(document.querySelectorAll('.js-cookie-content-blocker-consent-change-button'));cookieConsentButton.forEach(function loop(element){element.addEventListener('click',unblockEmbed);});if(typeof Cookiebot!=='undefined'&&Cookiebot.consent&&Cookiebot.consent.preferences)unblockEmbed();window.addEventListener('CookiebotOnAccept',function(e){if(typeof Cookiebot!=='undefined'&&Cookiebot.consent&&Cookiebot.consent.preferences)unblockEmbed();if(typeof Cookiebot!=='undefined'&&Cookiebot.consent&&Cookiebot.consent.statistics)window.dataLayer.push({event:'statisticsConsentOk'});},false);})(Drupal,once);;
/* @license MIT https://raw.githubusercontent.com/js-cookie/js-cookie/v3.0.5/LICENSE */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var n=e.Cookies,o=e.Cookies=t();o.noConflict=function(){return e.Cookies=n,o;};}());}(this,(function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o];}return e;}var t=function t(n,o){function r(t,r,i){if("undefined"!=typeof document){"number"==typeof (i=e({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=t+"="+n.write(r,t)+c;}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],o={},r=0;r<t.length;r++){var i=t[r].split("="),c=i.slice(1).join("=");try{var u=decodeURIComponent(i[0]);if(o[u]=n.read(c,u),e===u)break;}catch(e){}}return e?o[e]:o;}},remove:function(t,n){r(t,"",e({},n,{expires:-1}));},withAttributes:function(n){return t(this.converter,e({},this.attributes,n));},withConverter:function(n){return t(e({},this.converter,n),this.attributes);}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(n)}});}({read:function(e){return '"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent);}},{path:"/"});return t;}));;
/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
(function($,Drupal,window,document,cookies,once){'use strict';var $window=$(window);var $document=$(document);var consentGivenEventName='cookieContentBlockerConsentGiven';var consentChangedEventName='cookieContentBlockerChangeConsent';var cookieContentBlockerSettings=null;var specialEventSelectors={window:$window,document:$document};var consentChangeCallback=function(event){event.preventDefault();$window.trigger(consentChangedEventName);var triggerEvent=function(event){var $specialTarget=specialEventSelectors[event.selector];if($specialTarget===void (0)){$(event.selector).trigger(event.name);return;}$specialTarget.trigger(event.name);};$.each(cookieContentBlockerSettings.categories,function(id,category){triggerEvent(category.consentAwareness.change.event);});triggerEvent(cookieContentBlockerSettings.consentAwareness.change.event);};var matchCookieValue=function(cookieMatch){if(typeof cookieMatch.name!=='string'||typeof cookieMatch.value!=='string')return false;var currentValue=cookies.get(cookieMatch.name);if(currentValue===null||currentValue===void (0))return cookieMatch.operator==='!e';var matchMap={'e':function(){return true;},'===':function(v){return currentValue===v;},'>':function(v){return currentValue>v;},'<':function(v){return currentValue<v;},'c':function(v){return currentValue.indexOf(v)>=0;},'!c':function(v){return currentValue.indexOf(v)===-1;}};return (matchMap[cookieMatch.operator]!==void (0)&&matchMap[cookieMatch.operator](cookieMatch.value)||false);};Drupal.behaviors.cookieContentBlocker={initialized:false,getConsent:function(){var consent={categories:{},general:false};const queryString=window.location.search;const params=new URLSearchParams(queryString);$.each(cookieContentBlockerSettings.categories,function(id,category){consent.categories[id]=params.has("CookieContentBlockerCookieAccepted")||params.has("CookieContentBlockerCookieAccepted"+id.charAt(0).toUpperCase()+id.slice(1))||matchCookieValue(category.consentAwareness.accepted.cookie);});if(params.has("CookieContentBlockerCookieAccepted")||matchCookieValue(cookieContentBlockerSettings.consentAwareness.accepted.cookie)){consent.general=true;return consent;}if(matchCookieValue(cookieContentBlockerSettings.consentAwareness.declined.cookie))consent.general=false;return consent;},attachConsentEventListeners:function(context){$.each(cookieContentBlockerSettings.categories,function(id,category){Drupal.behaviors.cookieContentBlocker.attachConsentEventListener(context,category.consentAwareness.accepted.event);});Drupal.behaviors.cookieContentBlocker.attachConsentEventListener(context,cookieContentBlockerSettings.consentAwareness.accepted.event);if(Drupal.behaviors.cookieContentBlocker.initialized)return;$window.on(consentGivenEventName,function(){Drupal.behaviors.cookieContentBlocker.handleConsent();});},attachConsentEventListener:function(context,event){var $specialTarget=specialEventSelectors[event.selector];var isSpecialTarget=$specialTarget!==void (0);if(!isSpecialTarget)$(event.selector).on(event.name,function(){Drupal.behaviors.cookieContentBlocker.handleConsent(context);});if(Drupal.behaviors.cookieContentBlocker.initialized||!isSpecialTarget)return;$specialTarget.on(event.name,function(){Drupal.behaviors.cookieContentBlocker.handleConsent();});},attachConsentEventTriggers:function(context){once('cookie-content-blocker','.js-cookie-content-blocker-consent-change-button, .js-cookie-content-blocker-click-consent-change',context).forEach(function(button){$(button).on('click',consentChangeCallback);});},attach:function(context,settings){if(cookieContentBlockerSettings===null)cookieContentBlockerSettings=settings.cookieContentBlocker;Drupal.behaviors.cookieContentBlocker.handleConsent(context);Drupal.behaviors.cookieContentBlocker.attachConsentEventListeners(context);Drupal.behaviors.cookieContentBlocker.attachConsentEventTriggers(context);Drupal.behaviors.cookieContentBlocker.initialized=true;},handleConsent:function(context){if(context===void (0))context=document;var consent=Drupal.behaviors.cookieContentBlocker.getConsent();if(consent.general===true){Drupal.behaviors.cookieContentBlocker.loadBlockedContent(context);Drupal.behaviors.cookieContentBlocker.loadBlockedAssets();}for(var category in consent.categories){if(!consent.categories.hasOwnProperty(category)||consent.categories[category]!==true)continue;Drupal.behaviors.cookieContentBlocker.loadBlockedContent(context,category);Drupal.behaviors.cookieContentBlocker.loadBlockedAssets(category);}},handleCookieAccepted:function(context){Drupal.behaviors.cookieContentBlocker.handleConsent(context);},loadBlockedContent:function(context,category){var selector=category?".js-cookie-content-blocker-content[data-category='"+category+"']":'.js-cookie-content-blocker-content:not([data-category])';$(selector,context).each(function(){var $originalContentWrapperScript=$(this);var $blocker=$originalContentWrapperScript.closest('.js-cookie-content-blocker');var originalContent=$originalContentWrapperScript.text();originalContent=originalContent.replace(/(<[/]?script)fake/g,'$1');originalContent=originalContent.replace('//<![CDATA[','').replace('//]]>','');var replaceContent=function($wrapper){var parent=$wrapper.parent().get(0);$wrapper.replaceWith(originalContent);Drupal.attachBehaviors(parent);};replaceContent($blocker.length?$blocker:$originalContentWrapperScript);});},loadBlockedAssets:function(category){if(cookieContentBlockerSettings.blockedAssets===void (0))return;var originalBehaviors=$.extend(true,{},Drupal.behaviors);var selector=category?"[data-cookie-content-blocker-asset-id][data-categories]":'[data-cookie-content-blocker-asset-id]:not([data-categories])';$(selector).each(function(){var $blockedAsset=$(this);var id=$blockedAsset.data('cookie-content-blocker-asset-id');if(!(id in cookieContentBlockerSettings.blockedAssets))return;if(category&&!$blockedAsset.data('categories').includes(category))return;$blockedAsset.replaceWith(cookieContentBlockerSettings.blockedAssets[id]);});$.each(Drupal.behaviors,function(name,behavior){if(!originalBehaviors[name]&&$.isFunction(behavior.attach))behavior.attach(document,window.drupalSettings);});}};})(jQuery,Drupal,window,document,window.Cookies,once);;
