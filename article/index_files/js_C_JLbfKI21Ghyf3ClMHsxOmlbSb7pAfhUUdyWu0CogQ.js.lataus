/* @license GPL-2.0-or-later https://www.drupal.org/licensing/faq */
'use strict';(function(Drupal){const isSafari=navigator.vendor&&navigator.vendor.indexOf('Apple')>-1&&navigator.userAgent&&navigator.userAgent.indexOf('CriOS')===-1&&navigator.userAgent.indexOf('FxiOS')===-1;if(isSafari===true){const resizeHandler=Drupal.behaviors.aalto_utils.debounce(function(){var imgSrc=document.querySelectorAll('img[sizes], source[sizes]');for(let i=0;i<imgSrc.length;i++)imgSrc[i].sizes+='';},50);window.addEventListener('resize',resizeHandler);}})(Drupal);;
'use strict';(function(Drupal,once){Drupal.behaviors.aalto_anchor_links={attach:function attach(context){once('aalto_anchor_links','html',context).forEach(function(){const anchorLinks=[];const titleComponents=['.aalto-component .component-container > h2','.aalto-component .text-text h2','.aalto-component .text-text h3','.aalto-manual-liftup__header-title','.aalto-tiles-layout__header','.aalto-component .image-with-text-adaptive__text h2, .aalto-component .image-with-text-adaptive__text h3','.aalto-component .image-with-text-default__text h2, .aalto-component .image-with-text-default__text h3','.aalto-component .quick-links > h2','.aalto-component .highlight-quicklinks__title > h2','.aalto-component .aalto-quick-donation__heading','.aalto-component .aalto-donation__heading','.aalto-component .aalto-research-items-container__header > h2','.aalto-component .aalto-slider__header > h2','.aalto-component .aalto-some-module__title','.aalto-component .aalto-some-banner__title','.aalto-anchor-link-heading','.aalto-component .paragraph--text-accordion .accordion__container > h2','.service-index__section-related--title'];const availableAnchorLinks=[];const titleElements=document.querySelectorAll(titleComponents);titleElements.forEach((title,index)=>{const elementName=title.nodeName;const anchorName=index+'-'+title.textContent.toLowerCase().trim().replace(/ä/gi,'a').replace(/ö/gi,'o').replace(/å/gi,'a').replace(/\W/g,'-');anchorLinks.push(title.textContent.trim());availableAnchorLinks.push(anchorName);if(document.querySelector('.aalto-table-of-contents')&&document.querySelector('.aalto-table-of-contents .js-remove')&&!title.classList.contains('aalto-anchor-link-skip-toc')){const tocEl=document.querySelector('.aalto-table-of-contents .js-remove').parentNode;const tocLinkContainer=document.createElement('div');tocLinkContainer.className='aalto-anchor';const tocLink=document.createElement('a');tocLink.className='aalto-anchor__'+elementName.toLowerCase();tocLink.href='#'+anchorName;tocLink.textContent=title.textContent.trim();tocLinkContainer.append(tocLink);tocEl.append(tocLinkContainer);}title.classList.add('js-anchor-link');const button=document.createElement('button');button.type='button';button.className='js-anchor-link-icon';button.ariaLabel=Drupal.t('Copy link to this section');title.append(button);if(title.id!==''&&document.querySelector('[aria-labelledby="'+title.id+'"]'))document.querySelector('[aria-labelledby="'+title.id+'"]').setAttribute('aria-labelledby',anchorName);title.id=anchorName;const a=document.createElement('a');a.name=anchorName;title.parentNode.insertBefore(a,title);});if(document.querySelector('.js-remove'))document.querySelector('.js-remove').remove();Drupal.behaviors.aalto_utils.addListenerIfExistsByClass('js-anchor-link','click',function copyLinkAndShowNotification(event){const fullUrl=window.location.href;const url=fullUrl.split('#')[0];const savedThis=this;if((!this.querySelector('.js-anchor-link-text')&&event.target.classList.contains('js-anchor-link')&&!event.target.classList.contains('accordion__title'))||(!this.querySelector('.js-anchor-link-text')&&event.target.classList.contains('js-anchor-link-icon'))){Drupal.behaviors.aalto_utils.copyToClipboard(url+'#'+this.id);this.querySelector('.js-anchor-link-icon').focus();if(this.querySelector('.js-anchor-link-icon'))this.querySelector('.js-anchor-link-icon').ariaLabel='';const notification=document.createElement('span');notification.className='js-anchor-link-text js-remove-delay';notification.ariaLive='polite';notification.textContent=Drupal.t('Link copied to clipboard');this.append(notification);}if(this.querySelector('.js-anchor-link-text'))this.querySelector('.js-anchor-link-text').classList.add('js-anchor-link-copied');setTimeout(function removeNotification(){if(savedThis.querySelector('.js-remove-delay'))savedThis.querySelector('.js-remove-delay').remove();if(savedThis.querySelector('.js-anchor-link-icon'))savedThis.querySelector('.js-anchor-link-icon').ariaLabel=Drupal.t('Copy link to this section');},3500);});Drupal.behaviors.aalto_utils.addListenerIfExists('datahub-copy-to-clipboard-current-url','click',function copyLinkToClipboard(){const currentUrl=window.location.href;const textContainer=document.getElementById('aalto-footer__link-copied-notification');const status=Drupal.behaviors.aalto_utils.copyToClipboard(currentUrl);Drupal.behaviors.aalto_utils.showStatusOfCopyToClipboard(textContainer,Drupal.t('Link copied to clipboard'),!status,Drupal.t('Copying link failed'));});if(window.location.hash){if(availableAnchorLinks.includes(window.location.hash.slice(1)))return;availableAnchorLinks.forEach((anchorName)=>{if(anchorName.slice(anchorName.indexOf('-'))===window.location.hash.slice(window.location.hash.indexOf('-'))){const newUrlWithRightHash=window.location.origin+window.location.pathname+'#'+anchorName;window.history.pushState({},'',newUrlWithRightHash);}});}});}};})(Drupal,once);;
'use strict';(function(Drupal,drupalSettings,once){Drupal.behaviors.aalto_back_to_top={attach:function attach(context){once('aalto_back_to_top','html',context).forEach(function(){const mainContentContainer=context.querySelector('.layout-content');const scrollTopButton="<a href='#main-content' id='scroll-to-top-button' aria-label='"+Drupal.t('Back to top of content',{},{context:'Scroll to top button'})+"' class='aalto-scroll-up'>"+'<svg class="aalto-inline-icon" aria-hidden="true"> '+'<use xlink:href="'+drupalSettings.path.themeUrl+'/images/icons.svg#16-arrow_chevron_up" /> '+'</svg> '+Drupal.t('Top',{},{context:'Scroll to top button'})+'</a>';if(mainContentContainer)mainContentContainer.insertAdjacentHTML('beforeend',scrollTopButton);function showOrHideBackToTopButton(){const yOffset=window.pageYOffset;if(yOffset>window.innerHeight&&document.querySelector('#scroll-to-top-button')){if(!document.querySelector('#scroll-to-top-button').classList.contains('visible'))document.querySelector('#scroll-to-top-button').classList.add('visible');}else{if(document.querySelector('#scroll-to-top-button')&&document.querySelector('#scroll-to-top-button').classList.contains('visible'))document.querySelector('#scroll-to-top-button').classList.remove('visible');}}window.addEventListener('load',showOrHideBackToTopButton,{once:true,passive:true});window.addEventListener('scroll',showOrHideBackToTopButton,{passive:true});});}};})(Drupal,drupalSettings,once);;
